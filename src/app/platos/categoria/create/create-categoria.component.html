<div class="container">
    <br><br><br>
    <h2>Crear Nueva Categoría</h2>
  
    <form (submit)="submitCategoria(); $event.preventDefault()">
      <div class="mb-3">
        <label class="form-label">Nombre*</label>
        <input type="text" class="form-control" placeholder="Nombre" [(ngModel)]="categoria.nombre" name="nombre" required>
      </div>
  
      <div class="mb-3">
        <label class="form-label">Descripción</label>
        <textarea class="form-control" placeholder="Descripción" [(ngModel)]="categoria.descripcion" name="descripcion"></textarea>
      </div>
  
      <div class="mb-3">
        <label class="form-label">Icono (opcional)</label>
        <input type="file" class="form-control" (change)="onFileSelected($event)" accept="image/*" name="icono">
        <small class="text-muted">Formatos aceptados: JPEG, PNG, JPG, GIF, SVG. Tamaño máximo: 2MB</small>
        <div *ngIf="iconoPreview" class="mt-2">
          <img [src]="iconoPreview" alt="Vista previa del icono" style="max-height: 100px;">
        </div>
      </div>
      
      <div class="d-flex justify-content-between">
        <button type="button" class="btn btn-secondary" (click)="cancelar()">Cancelar</button>
        <button type="submit" class="btn btn-success" [disabled]="isLoading">
          <span *ngIf="!isLoading">Guardar Categoría</span>
          <span *ngIf="isLoading">
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Procesando...
          </span>
        </button>
      </div>
    </form>
  
    <p class="mt-3 text-success" *ngIf="successMessage">{{ successMessage }}</p>
    <p class="mt-3 text-danger" *ngIf="errorMessage">{{ errorMessage }}</p>
  </div>